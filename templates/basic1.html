<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .form-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f8f9fa;
    }
    .form-box {
      padding: 20px;
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 60%;
    }
    .required-field::after {
      content: " *";
      color: red;
    }
  </style>
</head>
<body>

<div class="form-container">
  <form class="form-box" method="POST">
    {% csrf_token %}
    
    <!-- Tab navigation -->
    <ul class="nav nav-tabs" id="formTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="personal-tab" data-bs-toggle="tab" href="#personal" role="tab" aria-controls="personal" aria-selected="true">Personal Details</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="employment-tab" data-bs-toggle="tab" href="#employment" role="tab" aria-controls="employment" aria-selected="false">Employment Details</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="beneficiary-tab" data-bs-toggle="tab" href="#beneficiary" role="tab" aria-controls="beneficiary" aria-selected="false">other Details</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="file-upload-tab" data-bs-toggle="tab" href="#file-upload" role="tab" aria-controls="file-upload" aria-selected="false">File Uploads</a>
      </li>
    </ul>

    <!-- Tab content -->
    <div class="tab-content mt-3" id="formTabsContent">
      <!-- Personal Details Tab -->
      <div class="tab-pane fade show active" id="personal" role="tabpanel" aria-labelledby="personal-tab">
      <div class="mb-3">
        <label for="title">Title  </label>
        <select id="title" name="title" class="form-control" required>
            <option value="" disabled selected>Select title</option>
            {% for loan in title_data %}
                <option value="{{ loan.code }}" >{{ loan.category }}</option>
            {% endfor %}
        </select>
      </div>
      
        <div class="mb-3">
          <label for="{{ form.first_name.id_for_label }}" class="form-label {% if form.first_name.field.required %}required-field{% endif %}">{{ form.first_name.label }}</label>
          {{ form.first_name }}
        </div>
        <div class="mb-3">
          <label for="{{ form.middle_name.id_for_label }}" class="form-label {% if form.middle_name.field.required %}required-field{% endif %}">{{ form.middle_name.label }}</label>
          {{ form.middle_name }}
        </div>
        <div class="mb-3">
          <label for="{{ form.last_name.id_for_label }}" class="form-label {% if form.last_name.field.required %}required-field{% endif %}">{{ form.last_name.label }}</label>
          {{ form.last_name }}
        </div>
        <div class="mb-3">
          <label for="{{ form.kra_pin.id_for_label }}" class="form-label {% if form.kra_pin.field.required %}required-field{% endif %}">{{ form.kra_pin.label }}</label>
          {{ form.kra_pin }}
        </div>
        <div class="mb-3">
          <label for="{{ form.type_of_resident.id_for_label }}" class="form-label {% if form.type_of_resident.field.required %}required-field{% endif %}">{{ form.type_of_resident.label }}</label>
          {{ form.type_of_resident }}
        </div>
        <div class="mb-3">
          <label for="{{ form.gender.id_for_label }}" class="form-label {% if form.gender.field.required %}required-field{% endif %}">{{ form.gender.label }}</label>
          {{ form.gender }}
        </div>
        <div class="mb-3">
          <label for="{{ form.date_of_birth.id_for_label }}" class="form-label {% if form.date_of_birth.field.required %}required-field{% endif %}">{{ form.date_of_birth.label }}</label>
          {{ form.date_of_birth }}
        </div>
        <div class="mb-3">
          <label for="{{ form.age.id_for_label }}" class="form-label {% if form.age.field.required %}required-field{% endif %}">{{ form.age.label }}</label>
          <input type="text" id="id_age" name="age" class="form-control" readonly>
        </div>

      <!-- Employment Details Tab -->
      <div class="mb-3">
        <label for="{{ form.customer_income.id_for_label }}" class="form-label {% if form.customer_income.field.required %}required-field{% endif %}">{{ form.customer_income.label }}</label>
        {{ form.customer_income }}
      </div>    
      <div class="mb-3">
        <label for="{{ form.existing_liabilities.id_for_label }}" class="form-label {% if form.existing_liabilities.field.required %}required-field{% endif %}">{{ form.existing_liabilities.label }}</label>
        {{ form.existing_liabilities }}
      </div>   
    </div>

      <div class="tab-pane fade" id="employment" role="tabpanel" aria-labelledby="employment-tab">
        <div class="mb-3">
          <label for="{{ form.employment_type.id_for_label }}" class="form-label {% if form.employment_type.field.required %}required-field{% endif %}">{{ form.employment_type.label }}</label>
          {{ form.employment_type }}
        </div>
       <div class="mb-3">
          <label for="{{ form.national_id.id_for_label }}" class="form-label {% if form.national_id.field.required %}required-field{% endif %}">{{ form.national_id.label }}</label>
          {{ form.national_id }}
        </div>
        {% comment %} <div class="mb-3">
          <label for="{{ form.department.id_for_label }}" class="form-label {% if form.department.field.required %}required-field{% endif %}">{{ form.department.label }}</label>
          {{ form.department }}
        </div> {% endcomment %}
        {% comment %} <div class="mb-3">
          <label for="{{ form.station.id_for_label }}" class="form-label {% if form.station.field.required %}required-field{% endif %}">{{ form.station.label }}</label>
          {{ form.station }}
        </div> {% endcomment %}
        {% comment %} <div class="mb-3">
          <label for="{{ form.designation.id_for_label }}" class="form-label {% if form.designation.field.required %}required-field{% endif %}">{{ form.designation.label }}</label>
          {{ form.designation }}
        </div> {% endcomment %}
        {% comment %} <div class="mb-3">
          <label for="{{ form.payroll_no.id_for_label }}" class="form-label {% if form.payroll_no.field.required %}required-field{% endif %}">{{ form.payroll_no.label }}</label>
          {{ form.payroll_no }}
        </div> {% endcomment %}
        <div class="mb-3">
          <label for="{{ form.e_mail.id_for_label }}" class="form-label {% if form.e_mail.field.required %}required-field{% endif %}">{{ form.e_mail.label }}</label>
          {{ form.e_mail }}
        </div>
        <div class="mb-3">
          <label for="{{ form.primary_phone_no.id_for_label }}" class="form-label {% if form.primary_phone_no.field.required %}required-field{% endif %}">{{ form.primary_phone_no.label }}</label>
          {{ form.primary_phone_no }}
        </div>
        <div class="mb-3">
          <label for="{{ form.mobile_transacting_no.id_for_label }}" class="form-label {% if form.mobile_transacting_no.field.required %}required-field{% endif %}">{{ form.mobile_transacting_no.label }}</label>
          {{ form.mobile_transacting_no }}
        </div>
        <div class="mb-3">
            <label for="{{ form.marital_status.id_for_label }}" class="form-label {% if form.marital_status.field.required %}required-field{% endif %}">{{ form.marital_status.label }}</label>
            {{ form.marital_status }}
          </div>
        <div class="mb-3">
          <label for="{{ form.alt_phone_no.id_for_label }}" class="form-label {% if form.alt_phone_no.field.required %}required-field{% endif %}">{{ form.alt_phone_no.label }}</label>
          {{ form.alt_phone_no }}
        </div>
        <div class="mb-3">
          <label for="{{ form.residential_town.id_for_label }}" class="form-label {% if form.residential_town.field.required %}required-field{% endif %}">{{ form.residential_town.label }}</label>
          {{ form.residential_town }}
        </div>
        <div class="mb-3">
          <label for="{{ form.address.id_for_label }}" class="form-label {% if form.address.field.required %}required-field{% endif %}">{{ form.address.label }}</label>
          {{ form.address }}
        </div>
        <div class="mb-3">
          <label for="{{ form.residential_estate.id_for_label }}" class="form-label {% if form.residential_estate.field.required %}required-field{% endif %}">{{ form.residential_estate.label }}</label>
          {{ form.residential_estate }}
        </div>
        <div class="mb-3">
            <label for="{{ form.receive_marketing_messages.id_for_label }}" class="form-label {% if form.receive_marketing_messages.field.required %}required-field{% endif %}">{{ form.receive_marketing_messages.label }}</label>
            {{ form.receive_marketing_messages }}
        </div>
      </div>

      <!-- Beneficiary Details Tab -->
      <div class="tab-pane fade" id="beneficiary" role="tabpanel" aria-labelledby="beneficiary-tab">
        <div class="mb-3">
          <label for="category_type">category Type</label>
          <select id="category_type" name="category_type" class="form-control" required>
              <option value="" disabled selected>Select category Type</option>
              {% for loan in category_data %}
                  <option value="{{ loan.code }}" >{{ loan.category }}</option>
              {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="category_name">category Name</label>
          <select id="category_name" name="category_name" class="form-control" required>
              <option value="" disabled selected>Select category</option>
              {% for loan in category_type_datas %}
                  <option value="{{ loan.code }}" >{{ loan.category }}</option>
              {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="category">category </label>
          <select id="category" name="category" class="form-control" required>
              <option value="" disabled selected>Select category</option>
              {% for loan in member_category_data %}
                  <option value="{{ loan.code }}" >{{ loan.category }}</option>
              {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="recrited_by">Recrited by </label>
          <select id="recrited_by" name="recrited_by" class="form-control" required>
              <option value="" disabled selected>Select recrited_by</option>
              {% for loan in officer_data %}
                  <option value="{{ loan.code }}" >{{ loan.category }}</option>
              {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="relationship_officer">relationship officer  </label>
          <select id="relationship_officer" name="relationship_officer" class="form-control" required>
              <option value="" disabled selected>Select relationship_officer</option>
              {% for loan in officer_data %}
                  <option value="{{ loan.code }}" >{{ loan.category }}</option>
              {% endfor %}
          </select>
        </div>
      <div class="mb-3">
          <label for="department_code">Department  </label>
          <select id="department_code" name="department_code" class="form-control" required>
              <option value="" disabled selected>Select department</option>
              {% for loan in department_data %}
                  <option value="{{ loan.code }}" >{{ loan.category }}</option>
              {% endfor %}
          </select>
        </div>
      

        {% comment %} <div class="mb-3">
          <label for="{{ form.beneficiary_type.id_for_label }}" class="form-label {% if form.beneficiary_type.field.required %}required-field{% endif %}">{{ form.beneficiary_type.label }}</label>
          {{ form.beneficiary_type }}
        </div> {% endcomment %}
        <div class="mb-3">
          <label for="{{ form.identification_type.id_for_label }}" class="form-label {% if form.identification_type.field.required %}required-field{% endif %}">{{ form.identification_type.label }}</label>
          {{ form.identification_type }}
        </div>
        {% comment %} <div class="mb-3">
          <label for="{{ form.relation.id_for_label }}" class="form-label {% if form.relation.field.required %}required-field{% endif %}">{{ form.relation.label }}</label>
          {{ form.relation }}
        </div> {% endcomment %}
        {% comment %} <div class="mb-3">
          <label for="{{ form.beneficiary_phone_no.id_for_label }}" class="form-label {% if form.beneficiary_phone_no.field.required %}required-field{% endif %}">{{ form.beneficiary_phone_no.label }}</label>
          {{ form.beneficiary_phone_no }}
        </div> {% endcomment %}
        {% comment %} <div class="mb-3">
          <label for="{{ form.beneficiary_full_name.id_for_label }}" class="form-label {% if form.beneficiary_full_name.field.required %}required-field{% endif %}">{{ form.beneficiary_full_name.label }}</label>
          {{ form.beneficiary_full_name }}
        </div> {% endcomment %}
       
        <div class="mb-3">
          <label for="{{ form.beneficiary_id_no.id_for_label }}" class="form-label {% if form.beneficiary_id_no.field.required %}required-field{% endif %}">{{ form.beneficiary_id_no.label }}</label>
          {{ form.beneficiary_id_no }}
        </div>
       
      </div>

      <!-- File Uploads Tab -->
      <div class="tab-pane fade" id="file-upload" role="tabpanel" aria-labelledby="file-upload-tab">
        <div class="mb-3">
          <label for="{{ form.passport_photo.id_for_label }}" class="form-label {% if form.passport_photo.field.required %}required-field{% endif %}">{{ form.passport_photo.label }}</label>
          {{ form.passport_photo }}
        </div>
        <div class="mb-3">
          <label for="{{ form.identification_image.id_for_label }}" class="form-label {% if form.identification_image.field.required %}required-field{% endif %}">{{ form.identification_image.label }}</label>
          {{ form.identification_image }}
        </div>
        <div class="mb-3">
          <label for="{{ form.atm.id_for_label }}" class="form-label {% if form.atm.field.required %}required-field{% endif %}">{{ form.atm.label }}</label>
          {{ form.atm }}
        </div>
        <div class="mb-3">
          <label for="{{ form.mobile.id_for_label }}" class="form-label {% if form.mobile.field.required %}required-field{% endif %}">{{ form.mobile.label }}</label>
          {{ form.mobile }}
        </div>
        <div class="mb-3">
          <label for="{{ form.fosa.id_for_label }}" class="form-label {% if form.fosa.field.required %}required-field{% endif %}">{{ form.fosa.label }}</label>
          {{ form.fosa }}
        </div>
        <div class="mb-3">
          <label for="{{ form.signature.id_for_label }}" class="form-label {% if form.signature.field.required %}required-field{% endif %}">{{ form.signature.label }}</label>
          {{ form.signature }}
        </div>
        <div class="mb-3">
          <label for="{{ form.front_id.id_for_label }}" class="form-label {% if form.front_id.field.required %}required-field{% endif %}">{{ form.front_id.label }}</label>
          {{ form.front_id }}
        </div>
        <div class="mb-3">
          <label for="{{ form.back_id.id_for_label }}" class="form-label {% if form.back_id.field.required %}required-field{% endif %}">{{ form.back_id.label }}</label>
          {{ form.back_id }}
        </div>
       
      </div>
    </div>

    <button type="submit" class="btn btn-primary mt-4">Submit</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.getElementById('id_date_of_birth').addEventListener('change', calculateAge);

  function calculateAge() {
    var dob = document.getElementById('id_date_of_birth').value;
    var birthDate = new Date(dob);
    var today = new Date();
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();

    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
      age--;
    }

    document.getElementById('id_age').value = age;
  }
</script>

</body>
</html>
