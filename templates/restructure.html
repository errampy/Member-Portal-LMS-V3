{% extends 'base.html' %}
{% load static %}

{% block body_block %}
<div class="container mt-5" style="max-width: 90%;">
    <div class="card px-5 py-5 shadow-lg">
        <h3 class="text-center mb-4">Restructure Loan Details</h3>

        <!-- Loan Details Section -->
        <div class="row">
            <div class="col-md-6">
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th class="text-end w-50">Interest Rate</th>
                            <td>{{ interest_rate }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Tenure</th>
                            <td>{{ tenure }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Tenure Type</th>
                            <td>{{ tenure_type }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Repayment Schedule</th>
                            <td>{{ repayment_schedule }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Disbursement Type</th>
                            <td>{{ disbursement_type }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Application ID</th>
                            <td>{{ application_id }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Loan Calculation Method</th>
                            <td>{{ loan_calculation_method }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="col-md-6">
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th class="text-end w-50">Loan Amount</th>
                            <td>{{ loan_amount }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Maximum Tenure</th>
                            <td>{{ max_terms }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Minimum Tenure</th>
                            <td>{{ min_terms }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Paid Installment</th>
                            <td>{{ pending_installment }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Amount Paid</th>
                            <td>{{ paid_amount|floatformat:2 }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Total Due</th>
                            <td>{{ total_due|floatformat:2 }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Pending Installment</th>
                            <td>{{ paid_installment }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Restructure Form -->
        <h3 class="text-center mb-4">Restructure Form</h3>
        <form id="RestructureForm" method="POST" enctype="multipart/form-data" class="px-4">
            {% csrf_token %}

            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="tenure" class="form-label">Tenure</label>
                    <input type="number" id="tenure" name="tenure" class="form-control" required>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-12">
                    <label for="repayment_id" class="form-label">Repayment Start Date</label>
                    <input type="date" id="repayment_id" name="repayment_id" class="form-control" required>
                </div>
            </div>

            {% if error_message %}
            <div class="alert alert-danger">
                {{ error_message }}
            </div>
            {% endif %}

            <div class="text-center">
                <button type="submit" class="btn btn-success btn-lg px-5">Submit</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
